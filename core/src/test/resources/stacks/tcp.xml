<config xmlns="urn:org:jgroups"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="urn:org:jgroups http://www.jgroups.org/schema/jgroups-5.2.xsd">
   <!-- Disable the regular thread pool queue for tests so we can set a lower min_threads -->
   <netty.NettyTP bind_addr="${jgroups.bind.address,jgroups.tcp.address:SITE_LOCAL}"
                  bind_port="${jgroups.bind.port,jgroups.tcp.port:7800}"
                  diag.enabled="${jgroups.diag.enabled:false}"
                  thread_naming_pattern="pl"
                  bundler_type="no-bundler"

                  thread_pool.min_threads="${jgroups.thread_pool.min_threads:0}"
                  thread_pool.max_threads="${jgroups.thread_pool.max_threads:200}"
                  thread_pool.keep_alive_time="60000"

                  thread_pool.thread_dumps_threshold="${jgroups.thread_dumps_threshold:10000}"
                  message_processing_policy="direct"
   />

   <LOCAL_PING/>

   <!-- Ergonomics, new in JGroups 2.11, are disabled by default until JGRP-1253 is resolved -->
   <!--<TCPPING timeout="3000"-->
            <!--initial_hosts="localhost[7800]"-->
            <!--port_range="3"-->
            <!--ergonomics="false"-->
	<!--/>-->

   <!--<MPING break_on_coord_rsp="true"-->
   <!--mcast_addr="${jgroups.mping.mcast_addr:239.2.4.6}"-->
   <!--mcast_port="${jgroups.mping.mcast_port:43366}"-->
   <!--ip_ttl="2" num_initial_members="3"/>-->

   <MERGE3 min_interval="1000" max_interval="5000"/>

   <!-- Suspect node `timeout` to `timeout + timeout_check_interval` millis after the last heartbeat -->
   <FD_ALL3 timeout="3000"
            interval="1000"
   />
   <VERIFY_SUSPECT2 timeout="1000"/>
   <!-- resend_last_seqno_max_times=10000 is a workaround for JGRP-2167  -->
   <pbcast.NAKACK2
           use_mcast_xmit="false"
           xmit_interval="200"
           xmit_table_num_rows="50"
           xmit_table_msgs_per_row="1024"
           xmit_table_max_compaction_time="30000"
           resend_last_seqno_max_times="10000"/>

   <pbcast.GMS print_local_addr="false"
               join_timeout="${jgroups.join_timeout:2000}"
               max_join_attempts="3"
   />

   <org.infinispan.test.fwk.TEST_RELAY2 site="__site_name__" config="configs/xsite/relay-config.xml" relay_multicasts="true" async_relay_creation="false"/>

</config>
